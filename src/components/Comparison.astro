---
// Before/After comparison data
const beforePoints = [
    "Invertían mucho dinero en ads, pero no daban a basto",
    "Tardaban muchas horas en contestar al lead",
    "Solo 1/4 de los leads agendaba cita",
    "Las recepcionistas lo hacían todo manual, generando sobrecarga",
    "Se perdían posibles ventas constantemente",
    "Tenían a +20 recepcionistas que no estaban bien coordinadas"
];

const afterPoints = [
    { text: "Agendamos un 10% más de primeras citas con el mismo volumen", highlight: "10% más" },
    { text: "Nuestro sistema responde leads al instante las 24 horas del día", highlight: "24 horas" },
    { text: "Pudieron atender a un 38% más de pacientes y aumentamos la asistencia en un 6%", highlight: "38% más" },
    { text: "El primer mes que implantamos la IA fue el mejor mes de ventas (+80 pacientes adicionales)", highlight: "+80 pacientes" },
    { text: "Consiguieron +450 reseñas positivas al mejorar la experiencia", highlight: "+450 reseñas" },
    { text: "Pasaron de 21 a 2 recepcionistas", highlight: "21 a 2" }
];
---

<section id="comparison-section" class="py-20 sm:py-24 md:py-32 px-4 sm:px-6 relative overflow-hidden bg-slate-50/50">
    <!-- Subtle dividers -->
    <div class="absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-slate-200 to-transparent"></div>
    <div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-slate-200 to-transparent"></div>
    
    <div class="max-w-7xl mx-auto relative z-10">
        <!-- Section Header -->
        <div class="text-center mb-14 sm:mb-16 md:mb-20 section-header">
            <span class="inline-flex items-center px-4 py-2 rounded-full bg-blue-50 border border-blue-100 text-blue-600 text-sm font-medium mb-6 animate-item">
                <span class="relative flex h-2 w-2 mr-2.5">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
                </span>
                Caso de Éxito Real
            </span>
            <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-slate-900 mb-5 animate-item">
                La transformación de <span class="text-gradient">Grupo Dental Clinics</span>
            </h2>
            <p class="text-base sm:text-lg text-slate-500 max-w-2xl mx-auto animate-item">
                Descubre cómo pasaron del caos a la eficiencia total con AiAutomatiza
            </p>
        </div>

        <!-- Before/After Comparison Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8">
            
            <!-- BEFORE Card -->
            <div class="comparison-card before-card group">
                <div class="h-full bg-white rounded-2xl sm:rounded-3xl p-6 sm:p-8 md:p-10 border border-slate-100 shadow-sm hover:shadow-xl hover:border-red-200 transition-all duration-500 relative overflow-hidden">
                    <!-- Subtle red gradient on hover -->
                    <div class="absolute inset-0 bg-gradient-to-br from-red-50/40 via-red-50/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    
                    <div class="relative z-10">
                        <!-- Header -->
                        <div class="flex items-center justify-between mb-8">
                            <div class="p-3 rounded-xl bg-slate-50 border border-slate-100">
                                <img 
                                    src="https://optim.tildacdn.net/tild6231-3230-4364-a361-393363633064/-/resize/70x/-/format/webp/1.png.webp" 
                                    alt="Grupo Dental Clinics" 
                                    class="h-6 sm:h-8 w-auto grayscale"
                                    loading="lazy"
                                />
                            </div>
                            <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-red-50 border border-red-100 text-red-500 text-xs font-medium">
                                <span class="w-1.5 h-1.5 bg-red-500 rounded-full mr-2 animate-pulse"></span>
                                Situación inicial
                            </span>
                        </div>
                        
                        <!-- Badge -->
                        <div class="inline-flex items-center px-4 py-2 rounded-full bg-red-50 border border-red-100 text-red-500 text-xs sm:text-sm font-medium mb-6">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                            </svg>
                            Caos, desperdicio y frustración
                        </div>
                        
                        <!-- Title -->
                        <h3 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-slate-900 mb-2">
                            Antes
                        </h3>
                        <p class="text-lg sm:text-xl text-slate-500 mb-10">
                            de implementar <span class="text-gradient font-semibold">AiAutomatiza</span>
                        </p>
                        
                        <!-- Pain points list -->
                        <ul class="space-y-4 sm:space-y-5">
                            {beforePoints.map((point, index) => (
                                <li class="point-item flex items-start gap-4 group/item" data-index={index}>
                                    <div class="shrink-0 w-8 h-8 rounded-full bg-red-50 border border-red-100 flex items-center justify-center mt-0.5 group-hover/item:scale-110 group-hover/item:bg-red-100 transition-all duration-300">
                                        <svg class="w-4 h-4 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                        </svg>
                                    </div>
                                    <span class="text-slate-600 text-sm sm:text-base leading-relaxed group-hover/item:text-slate-900 transition-colors duration-300" style="line-height: 1.65;">{point}</span>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            </div>

            <!-- AFTER Card -->
            <div class="comparison-card after-card group">
                <div class="h-full bg-white rounded-2xl sm:rounded-3xl p-6 sm:p-8 md:p-10 border border-blue-200 shadow-lg hover:shadow-xl hover:border-blue-300 transition-all duration-500 relative overflow-hidden">
                    <!-- Gradient background -->
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-50/50 via-transparent to-green-50/30"></div>
                    
                    <!-- Success indicator line -->
                    <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-green-400 to-blue-500"></div>
                    
                    <div class="relative z-10">
                        <!-- Header -->
                        <div class="flex items-center justify-between mb-8">
                            <div class="p-3 rounded-xl bg-white/80 border border-blue-100 shadow-sm">
                                <img 
                                    src="https://optim.tildacdn.net/tild6231-3230-4364-a361-393363633064/-/resize/70x/-/format/webp/1.png.webp" 
                                    alt="Grupo Dental Clinics" 
                                    class="h-6 sm:h-8 w-auto"
                                    loading="lazy"
                                />
                            </div>
                            <span class="inline-flex items-center px-3 py-1.5 rounded-full bg-green-50 border border-green-100 text-green-600 text-xs font-medium">
                                <span class="w-1.5 h-1.5 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                                Resultados actuales
                            </span>
                        </div>
                        
                        <!-- Badge -->
                        <div class="inline-flex items-center px-4 py-2 rounded-full bg-green-50 border border-green-100 text-green-600 text-xs sm:text-sm font-medium mb-6">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Orden, eficacia y facturación
                        </div>
                        
                        <!-- Title -->
                        <h3 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-slate-900 mb-2">
                            Después
                        </h3>
                        <p class="text-lg sm:text-xl text-slate-500 mb-10">
                            de implementar <span class="text-gradient font-semibold">AiAutomatiza</span>
                        </p>
                        
                        <!-- Success points list -->
                        <ul class="space-y-4 sm:space-y-5">
                            {afterPoints.map((point, index) => (
                                <li class="point-item flex items-start gap-4 group/item" data-index={index}>
                                    <div class="shrink-0 w-8 h-8 rounded-full bg-green-50 border border-green-100 flex items-center justify-center mt-0.5 group-hover/item:scale-110 group-hover/item:bg-green-100 transition-all duration-300 shadow-sm">
                                        <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                        </svg>
                                    </div>
                                    <span class="text-slate-700 text-sm sm:text-base leading-relaxed group-hover/item:text-slate-900 transition-colors duration-300" style="line-height: 1.65;">
                                        {point.text}
                                    </span>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    /* Animation states */
    .section-header .animate-item,
    .comparison-card {
        opacity: 0;
    }
    
    .comparison-card .point-item {
        opacity: 0;
        transform: translateY(10px);
    }
    
    /* Animated state */
    .section-header.animate .animate-item {
        animation: fade-in-up 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    
    .section-header.animate .animate-item:nth-child(1) { animation-delay: 0.1s; }
    .section-header.animate .animate-item:nth-child(2) { animation-delay: 0.2s; }
    .section-header.animate .animate-item:nth-child(3) { animation-delay: 0.3s; }
    
    .before-card.animate {
        animation: fade-in-left 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.3s forwards;
    }
    
    .after-card.animate {
        animation: fade-in-right 0.6s cubic-bezier(0.16, 1, 0.3, 1) 0.5s forwards;
    }
    
    .comparison-card.animate .point-item {
        animation: fade-in-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    
    .before-card.animate .point-item:nth-child(1) { animation-delay: 0.5s; }
    .before-card.animate .point-item:nth-child(2) { animation-delay: 0.6s; }
    .before-card.animate .point-item:nth-child(3) { animation-delay: 0.7s; }
    .before-card.animate .point-item:nth-child(4) { animation-delay: 0.8s; }
    .before-card.animate .point-item:nth-child(5) { animation-delay: 0.9s; }
    .before-card.animate .point-item:nth-child(6) { animation-delay: 1.0s; }
    
    .after-card.animate .point-item:nth-child(1) { animation-delay: 0.7s; }
    .after-card.animate .point-item:nth-child(2) { animation-delay: 0.8s; }
    .after-card.animate .point-item:nth-child(3) { animation-delay: 0.9s; }
    .after-card.animate .point-item:nth-child(4) { animation-delay: 1.0s; }
    .after-card.animate .point-item:nth-child(5) { animation-delay: 1.1s; }
    .after-card.animate .point-item:nth-child(6) { animation-delay: 1.2s; }
    
    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes fade-in-left {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
    
    @keyframes fade-in-right {
        from {
            opacity: 0;
            transform: translateX(30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
</style>

<script>
    // Intersection Observer for scroll-triggered animations
    function initComparisonAnimations() {
        const section = document.getElementById('comparison-section');
        if (!section) return;
        
        const header = section.querySelector('.section-header');
        const beforeCard = section.querySelector('.before-card');
        const afterCard = section.querySelector('.after-card');
        
        const observerOptions = {
            root: null,
            rootMargin: '0px 0px -80px 0px',
            threshold: 0.1
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    header?.classList.add('animate');
                    beforeCard?.classList.add('animate');
                    afterCard?.classList.add('animate');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);
        
        if (section) {
            observer.observe(section);
        }
    }
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initComparisonAnimations);
    } else {
        initComparisonAnimations();
    }
    
    document.addEventListener('astro:page-load', initComparisonAnimations);
</script>
